/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package org.bitsandpieces.util.encoding;

/**
 *
 * @author pp
 */
final class EncoderCP860 extends SingleByteEncoder implements Encoder {

	// collision-free hash table for CP860 char-to-byte conversion.
	// unless entry == INVALID_ID, highest 16 bits are used 
	// to verify key match, lowest byte is mapped byte.
	// only maps entries for keys >= 128 (non-ASCII range).
	private static final int[] TABLE = {
		0x00d4008c, 0x224800f7, 0x00bf00a8, INVALID_ID, 0x221e00ec, 0x00aa00a6, INVALID_ID, INVALID_ID,
		0x255900d3, 0x00ea0088, INVALID_ID, INVALID_ID, 0x00d50099, INVALID_ID, 0x00c00091, 0x03a600e8,
		0x258400dc, 0x00ab00ae, INVALID_ID, INVALID_ID, INVALID_ID, 0x255a00c8, INVALID_ID, INVALID_ID,
		INVALID_ID, INVALID_ID, 0x00c10086, INVALID_ID, INVALID_ID, 0x00ac00aa, INVALID_ID, INVALID_ID,
		INVALID_ID, 0x255b00be, 0x00ec008d, INVALID_ID, INVALID_ID, INVALID_ID, 0x00c2008f, INVALID_ID,
		0x251c00c3, INVALID_ID, 0x039300e2, INVALID_ID, INVALID_ID, 0x255c00bd, 0x00ed00a1, 0x226100f0,
		INVALID_ID, 0x232000f4, 0x00c3008e, 0x03a900ea, INVALID_ID, INVALID_ID, INVALID_ID, INVALID_ID,
		INVALID_ID, 0x255d00bc, INVALID_ID, INVALID_ID, 0x00d9009d, 0x232100f5, INVALID_ID, INVALID_ID,
		0x258800db, INVALID_ID, INVALID_ID, INVALID_ID, INVALID_ID, 0x255e00c6, INVALID_ID, INVALID_ID,
		0x00da0096, 0x03c000e3, 0x253400c1, INVALID_ID, INVALID_ID, 0x00b000f8, INVALID_ID, INVALID_ID,
		INVALID_ID, 0x255f00c7, INVALID_ID, 0x226400f3, 0x20a7009e, INVALID_ID, INVALID_ID, INVALID_ID,
		INVALID_ID, 0x00b100f1, INVALID_ID, INVALID_ID, INVALID_ID, 0x256000cc, 0x00f100a4, 0x226500f2,
		0x00dc009a, INVALID_ID, 0x25a000fe, 0x00c70080, INVALID_ID, 0x00b200fd, 0x039800e9, 0x250c00da,
		INVALID_ID, 0x256100b5, 0x00f20095, INVALID_ID, INVALID_ID, 0x03c300e5, INVALID_ID, 0x00c80092,
		0x258c00dd, 0x207f00fc, INVALID_ID, INVALID_ID, INVALID_ID, 0x256200b6, 0x00f300a2, INVALID_ID,
		INVALID_ID, 0x03c400e7, INVALID_ID, 0x00c90090, INVALID_ID, INVALID_ID, INVALID_ID, INVALID_ID,
		INVALID_ID, 0x256300b9, 0x00f40093, INVALID_ID, INVALID_ID, 0x00df00e1, INVALID_ID, 0x00ca0089,
		0x252400b4, 0x00b500e6, INVALID_ID, 0x222900ef, 0x00a000ff, 0x256400d1, 0x00f50094, INVALID_ID,
		INVALID_ID, 0x00e00085, 0x03c600ed, INVALID_ID, 0x03b100e0, INVALID_ID, INVALID_ID, 0x251000bf,
		0x00a100ad, 0x256500d2, INVALID_ID, INVALID_ID, 0x255000cd, 0x00e100a0, INVALID_ID, 0x00cc0098,
		INVALID_ID, 0x259000de, 0x00b700fa, INVALID_ID, 0x00a2009b, 0x256600cb, 0x00f700f6, INVALID_ID,
		0x255100ba, 0x00e20083, 0x253c00c5, 0x00cd008b, INVALID_ID, 0x259100b0, INVALID_ID, INVALID_ID,
		0x00a3009c, INVALID_ID, 0x256700cf, INVALID_ID, 0x255200d5, 0x00e30084, INVALID_ID, INVALID_ID,
		0x03b400eb, 0x259200b1, INVALID_ID, INVALID_ID, INVALID_ID, INVALID_ID, 0x256800d0, 0x00f90097,
		0x255300d6, INVALID_ID, INVALID_ID, INVALID_ID, 0x03b500ee, 0x259300b2, 0x00ba00a7, 0x251400c0,
		0x221900f9, INVALID_ID, 0x256900ca, 0x00fa00a3, 0x255400c9, INVALID_ID, INVALID_ID, INVALID_ID,
		INVALID_ID, INVALID_ID, 0x00bb00af, INVALID_ID, 0x221a00fb, INVALID_ID, 0x256a00d8, 0x250000c4,
		0x255500b8, INVALID_ID, INVALID_ID, INVALID_ID, 0x00d100a5, INVALID_ID, 0x00bc00ac, 0x258000df,
		INVALID_ID, INVALID_ID, 0x256b00d7, 0x00fc0081, 0x255600b7, 0x00e70087, INVALID_ID, INVALID_ID,
		0x00d200a9, 0x252c00c2, 0x00bd00ab, 0x03a300e4, INVALID_ID, INVALID_ID, 0x256c00ce, 0x250200b3,
		0x255700bb, 0x00e8008a, INVALID_ID, INVALID_ID, 0x00d3009f, INVALID_ID, INVALID_ID, 0x251800d9,
		INVALID_ID, INVALID_ID, INVALID_ID, INVALID_ID, 0x255800d4, 0x00e90082, INVALID_ID, INVALID_ID
	};

	@Override
	int convert(int i) {
		int m = i * 6340922;
		return TABLE[((m >>> 31) ^ (m >>> 12)) & 0xff];
	}

	@Override
	public Encoding encoding() {
		return Encoding.CP860;
	}
}
